import{x as I}from"./chunk-D4RADZKF-BvqgCGan.js";const T=e=>{let t;const n=new Set,s=(a,p)=>{const m=typeof a=="function"?a(t):a;if(!Object.is(m,t)){const w=t;t=p??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(f=>f(t,w))}},i=()=>t,d={setState:s,getState:i,getInitialState:()=>l,subscribe:a=>(n.add(a),()=>n.delete(a))},l=t=e(s,i,d);return d},O=e=>e?T(e):T,j=e=>e;function R(e,t=j){const n=I.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return I.useDebugValue(n),n}const H=e=>{const t=O(e),n=s=>R(t,s);return Object.assign(n,t),n},W=e=>e?H(e):H,U=W(e=>({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0,isMobile:typeof window<"u"?window.innerWidth<768:!1,isTablet:typeof window<"u"?window.innerWidth>=768&&window.innerWidth<1024:!1,isDesktop:typeof window<"u"?window.innerWidth>=1024:!1,updateWindowDimensions:()=>{if(typeof window>"u")return;const t=window.innerWidth,n=window.innerHeight;e({width:t,height:n,isMobile:t<768,isTablet:t>=768&&t<1024,isDesktop:t>=1024})}}));function k(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var o;const h=l=>l===null?null:JSON.parse(l,void 0),d=(o=n.getItem(i))!=null?o:null;return d instanceof Promise?d.then(h):h(d)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const S=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return S(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return S(s)(n)}}}},x=(e,t)=>(n,s,i)=>{let o={storage:k(()=>localStorage),partialize:r=>r,version:0,merge:(r,y)=>({...y,...r}),...t},h=!1;const d=new Set,l=new Set;let a=o.storage;if(!a)return e((...r)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...r)},s,i);const p=()=>{const r=o.partialize({...s()});return a.setItem(o.name,{state:r,version:o.version})},m=i.setState;i.setState=(r,y)=>{m(r,y),p()};const w=e((...r)=>{n(...r),p()},s,i);i.getInitialState=()=>w;let f;const b=()=>{var r,y;if(!a)return;h=!1,d.forEach(u=>{var c;return u((c=s())!=null?c:w)});const g=((y=o.onRehydrateStorage)==null?void 0:y.call(o,(r=s())!=null?r:w))||void 0;return S(a.getItem.bind(a))(o.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==o.version){if(o.migrate){const c=o.migrate(u.state,u.version);return c instanceof Promise?c.then(v=>[!0,v]):[!0,c]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,u.state];return[!1,void 0]}).then(u=>{var c;const[v,_]=u;if(f=o.merge(_,(c=s())!=null?c:w),n(f,!0),v)return p()}).then(()=>{g==null||g(f,void 0),f=s(),h=!0,l.forEach(u=>u(f))}).catch(u=>{g==null||g(void 0,u)})};return i.persist={setOptions:r=>{o={...o,...r},r.storage&&(a=r.storage)},clearStorage:()=>{a==null||a.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>b(),hasHydrated:()=>h,onHydrate:r=>(d.add(r),()=>{d.delete(r)}),onFinishHydration:r=>(l.add(r),()=>{l.delete(r)})},o.skipHydration||b(),f||w},D=x,F=W()(D(e=>({userType:null,setUserType:t=>e({userType:t}),resetUserType:()=>e({userType:null})}),{name:"cyberhub-user-storage",partialize:e=>({userType:e.userType})}));export{F as a,U as u};
